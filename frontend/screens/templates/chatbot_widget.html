<!-- Premium Floating Chatbot Widget -->
<style>
    /* Chatbot Button - Fixed and Draggable */
    .chatbot-button {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #732C3F 0%, #8B4A5C 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: move;
        box-shadow: 0 8px 25px rgba(115, 44, 63, 0.4);
        z-index: 9999;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        animation: pulse 2s infinite;
        touch-action: none;
        user-select: none;
        will-change: transform;
    }
    
    .chatbot-button.dragging {
        animation: none;
        cursor: grabbing;
        transform: scale(1.15);
        box-shadow: 0 15px 45px rgba(115, 44, 63, 0.8);
        transition: none;
    }
    
    .chatbot-button:hover:not(.dragging) {
        transform: scale(1.1);
        box-shadow: 0 12px 35px rgba(115, 44, 63, 0.6);
    }
    
    .chatbot-button.hidden {
        display: none;
    }
    
    @keyframes pulse {
        0%, 100% {
            box-shadow: 0 8px 25px rgba(115, 44, 63, 0.4);
        }
        50% {
            box-shadow: 0 8px 35px rgba(115, 44, 63, 0.7);
        }
    }
    
    /* Close Button for Chatbot */
    .chatbot-hide-btn {
        position: absolute;
        top: -8px;
        right: -8px;
        width: 24px;
        height: 24px;
        background: #ff4444;
        border-radius: 50%;
        display: none;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        border: 2px solid white;
        z-index: 10000;
        transition: all 0.3s;
    }
    
    .chatbot-hide-btn:hover {
        background: #cc0000;
        transform: scale(1.2);
    }
    
    .chatbot-button:hover .chatbot-hide-btn {
        display: flex;
    }
    
    .chatbot-button svg {
        width: 28px;
        height: 28px;
        fill: white;
    }
    
    .chatbot-badge {
        position: absolute;
        top: -5px;
        right: -5px;
        width: 20px;
        height: 20px;
        background: #4CAF50;
        border-radius: 50%;
        border: 3px solid white;
        animation: bounce 1s infinite;
    }
    
    @keyframes bounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-5px); }
    }
    
    /* Chatbot Window */
    .chatbot-window {
        position: fixed;
        bottom: 100px;
        right: 30px;
        width: 380px;
        height: 550px;
        background: white;
        border-radius: 20px;
        box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
        display: none;
        flex-direction: column;
        z-index: 9998;
        overflow: hidden;
        animation: slideUp 0.3s ease;
        will-change: transform;
    }
    
    .chatbot-window.show {
        display: flex;
    }
    
    .chatbot-window.dragging {
        transition: none;
    }
    
    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    /* Chatbot Header */
    .chatbot-header {
        background: linear-gradient(135deg, #732C3F 0%, #8B4A5C 100%);
        color: white;
        padding: 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }
    
    .chatbot-header-left {
        display: flex;
        align-items: center;
        gap: 12px;
    }
    
    .chatbot-avatar {
        width: 45px;
        height: 45px;
        background: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
    }
    
    .chatbot-info h3 {
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 3px;
    }
    
    .chatbot-status {
        font-size: 12px;
        opacity: 0.9;
        display: flex;
        align-items: center;
        gap: 5px;
    }
    
    .status-dot {
        width: 8px;
        height: 8px;
        background: #4CAF50;
        border-radius: 50%;
        animation: blink 1.5s infinite;
    }
    
    @keyframes blink {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.3; }
    }
    
    .chatbot-close {
        background: rgba(255, 255, 255, 0.2);
        border: none;
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s;
    }
    
    .chatbot-close:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: rotate(90deg);
    }
    
    /* Chatbot Messages */
    .chatbot-messages {
        flex: 1;
        padding: 20px;
        overflow-y: auto;
        background: #f9f9f9;
    }
    
    .chatbot-messages::-webkit-scrollbar {
        width: 6px;
    }
    
    .chatbot-messages::-webkit-scrollbar-thumb {
        background: #732C3F;
        border-radius: 3px;
    }
    
    .chat-message {
        margin-bottom: 15px;
        display: flex;
        gap: 10px;
        animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .chat-message.bot {
        flex-direction: row;
    }
    
    .chat-message.user {
        flex-direction: row-reverse;
    }
    
    .message-avatar {
        width: 35px;
        height: 35px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        flex-shrink: 0;
    }
    
    .message-avatar.bot {
        background: linear-gradient(135deg, #732C3F 0%, #8B4A5C 100%);
        color: white;
    }
    
    .message-avatar.user {
        background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
        color: white;
    }
    
    .message-bubble {
        max-width: 70%;
        padding: 12px 16px;
        border-radius: 18px;
        font-size: 14px;
        line-height: 1.5;
    }
    
    .message-bubble.bot {
        background: white;
        color: #333;
        border-bottom-left-radius: 4px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }
    
    .message-bubble.user {
        background: linear-gradient(135deg, #732C3F 0%, #8B4A5C 100%);
        color: white;
        border-bottom-right-radius: 4px;
    }
    
    .message-time {
        font-size: 11px;
        opacity: 0.6;
        margin-top: 5px;
    }
    
    /* Quick Replies */
    .quick-replies {
        padding: 10px 20px;
        display: flex;
        gap: 8px;
        overflow-x: auto;
        background: white;
        border-top: 1px solid #e0e0e0;
    }
    
    .quick-replies::-webkit-scrollbar {
        height: 4px;
    }
    
    .quick-reply-btn {
        padding: 8px 16px;
        background: #f0f0f0;
        border: 2px solid #e0e0e0;
        border-radius: 20px;
        font-size: 13px;
        cursor: pointer;
        white-space: nowrap;
        transition: all 0.3s;
    }
    
    .quick-reply-btn:hover {
        background: #732C3F;
        color: white;
        border-color: #732C3F;
    }
    
    /* Chatbot Input */
    .chatbot-input {
        padding: 15px 20px;
        background: white;
        border-top: 1px solid #e0e0e0;
        display: flex;
        gap: 10px;
        align-items: center;
    }
    
    .chatbot-input input {
        flex: 1;
        padding: 12px 16px;
        border: 2px solid #e0e0e0;
        border-radius: 25px;
        font-size: 14px;
        outline: none;
        transition: all 0.3s;
    }
    
    .chatbot-input input:focus {
        border-color: #732C3F;
    }
    
    .chatbot-send-btn {
        width: 45px;
        height: 45px;
        background: linear-gradient(135deg, #732C3F 0%, #8B4A5C 100%);
        border: none;
        border-radius: 50%;
        color: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s;
    }
    
    .chatbot-send-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 4px 15px rgba(115, 44, 63, 0.4);
    }
    
    .chatbot-send-btn svg {
        width: 20px;
        height: 20px;
        fill: white;
    }
    
    /* Typing Indicator */
    .typing-indicator {
        display: flex;
        gap: 4px;
        padding: 12px 16px;
        background: white;
        border-radius: 18px;
        width: fit-content;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }
    
    .typing-dot {
        width: 8px;
        height: 8px;
        background: #732C3F;
        border-radius: 50%;
        animation: typing 1.4s infinite;
    }
    
    .typing-dot:nth-child(2) {
        animation-delay: 0.2s;
    }
    
    .typing-dot:nth-child(3) {
        animation-delay: 0.4s;
    }
    
    @keyframes typing {
        0%, 60%, 100% {
            transform: translateY(0);
            opacity: 0.7;
        }
        30% {
            transform: translateY(-10px);
            opacity: 1;
        }
    }
    
    /* Mobile Responsive */
    @media (max-width: 768px) {
        .chatbot-window {
            width: calc(100% - 20px);
            height: calc(100% - 120px);
            right: 10px;
            bottom: 90px;
        }
        
        .chatbot-button {
            bottom: 20px;
            right: 20px;
        }
    }
</style>

<!-- Chatbot Button -->
<div class="chatbot-button" id="chatbotButton" onclick="toggleChatbot()">
    <svg viewBox="0 0 24 24">
        <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/>
        <circle cx="12" cy="10" r="1.5"/>
        <circle cx="8" cy="10" r="1.5"/>
        <circle cx="16" cy="10" r="1.5"/>
    </svg>
    <div class="chatbot-badge"></div>
    <div class="chatbot-hide-btn" onclick="hideChatbot(event)" title="Hide chatbot">√ó</div>
</div>

<!-- Chatbot Window -->
<div class="chatbot-window" id="chatbotWindow">
    <!-- Header -->
    <div class="chatbot-header">
        <div class="chatbot-header-left">
            <div class="chatbot-avatar">ü§ñ</div>
            <div class="chatbot-info">
                <h3>BizPulse Assistant</h3>
                <div class="chatbot-status">
                    <span class="status-dot"></span>
                    <span>Online</span>
                </div>
            </div>
        </div>
        <button class="chatbot-close" onclick="toggleChatbot()">√ó</button>
    </div>
    
    <!-- Messages -->
    <div class="chatbot-messages" id="chatbotMessages">
        <div class="chat-message bot">
            <div class="message-avatar bot">ü§ñ</div>
            <div>
                <div class="message-bubble bot">
                    üëã Hello! Welcome to BizPulse!<br><br>
                    I'm your AI-powered assistant, here to help you with:<br>
                    ‚ú® Features & pricing<br>
                    üéØ Demo & trial<br>
                    üìû Support & contact<br>
                    üì± Mobile app<br>
                    üìä Reports & more<br><br>
                    Ask me anything about BizPulse or call us at <strong>+91 7093635305</strong>!
                </div>
                <div class="message-time">Just now</div>
            </div>
        </div>
    </div>
    
    <!-- Quick Replies -->
    <div class="quick-replies" id="quickReplies">
        <button class="quick-reply-btn" onclick="sendQuickReply('Features')">‚ú® Features</button>
        <button class="quick-reply-btn" onclick="sendQuickReply('Pricing')">üí∞ Pricing</button>
        <button class="quick-reply-btn" onclick="sendQuickReply('Demo')">üéØ Request Demo</button>
        <button class="quick-reply-btn" onclick="sendQuickReply('Support')">üí¨ Support</button>
    </div>
    
    <!-- Input -->
    <div class="chatbot-input">
        <input type="text" id="chatbotInput" placeholder="Type your message..." onkeypress="handleChatKeyPress(event)">
        <button class="chatbot-send-btn" onclick="sendChatMessage()">
            <svg viewBox="0 0 24 24">
                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
            </svg>
        </button>
    </div>
</div>

<script>
    // Draggable Chatbot Button
    let isDragging = false;
    let dragStartTime = 0;
    let startX, startY, initialX, initialY;
    let longPressTimer;
    const LONG_PRESS_DURATION = 500; // 500ms for long press
    
    const chatbotBtn = document.querySelector('.chatbot-button');
    const chatbotWindow = document.getElementById('chatbotWindow');
    
    // Load saved position
    function loadChatbotPosition() {
        const savedPos = localStorage.getItem('chatbotPosition');
        if (savedPos) {
            const pos = JSON.parse(savedPos);
            chatbotBtn.style.bottom = pos.bottom;
            chatbotBtn.style.right = pos.right;
            chatbotBtn.style.top = pos.top || 'auto';
            chatbotBtn.style.left = pos.left || 'auto';
            
            // Update window position too
            updateWindowPosition();
        }
    }
    
    // Save position
    function saveChatbotPosition() {
        const pos = {
            bottom: chatbotBtn.style.bottom,
            right: chatbotBtn.style.right,
            top: chatbotBtn.style.top,
            left: chatbotBtn.style.left
        };
        localStorage.setItem('chatbotPosition', JSON.stringify(pos));
    }
    
    // Update window position based on button position
    function updateWindowPosition() {
        const btnRect = chatbotBtn.getBoundingClientRect();
        const windowHeight = 550;
        const windowWidth = 380;
        const gap = 10; // Gap between button and window
        
        // Calculate window position
        let windowBottom = window.innerHeight - btnRect.top + gap;
        let windowRight = window.innerWidth - btnRect.right;
        
        // Check if window fits above button
        if (btnRect.top - windowHeight - gap < 0) {
            // Not enough space above, position below
            windowBottom = window.innerHeight - btnRect.bottom - windowHeight - gap;
        }
        
        // Check if window fits on right side
        if (btnRect.right + windowWidth + gap > window.innerWidth) {
            // Not enough space on right, position on left
            windowRight = window.innerWidth - btnRect.left - windowWidth;
        }
        
        // Apply position
        chatbotWindow.style.bottom = Math.max(10, windowBottom) + 'px';
        chatbotWindow.style.right = Math.max(10, windowRight) + 'px';
        chatbotWindow.style.top = 'auto';
        chatbotWindow.style.left = 'auto';
    }
    
    // Mouse/Touch Events
    chatbotBtn.addEventListener('mousedown', startDrag);
    chatbotBtn.addEventListener('touchstart', startDrag, { passive: false });
    
    document.addEventListener('mousemove', drag);
    document.addEventListener('touchmove', drag, { passive: false });
    
    document.addEventListener('mouseup', endDrag);
    document.addEventListener('touchend', endDrag);
    
    function startDrag(e) {
        dragStartTime = Date.now();
        
        // Start long press timer
        longPressTimer = setTimeout(() => {
            isDragging = true;
            chatbotBtn.classList.add('dragging');
            chatbotWindow.classList.add('dragging');
            
            const touch = e.type === 'touchstart' ? e.touches[0] : e;
            const rect = chatbotBtn.getBoundingClientRect();
            
            startX = touch.clientX;
            startY = touch.clientY;
            initialX = rect.left;
            initialY = rect.top;
            
            // Prevent default to avoid scrolling
            if (e.type === 'touchstart') {
                e.preventDefault();
            }
        }, LONG_PRESS_DURATION);
    }
    
    function drag(e) {
        if (!isDragging) return;
        
        e.preventDefault();
        
        const touch = e.type === 'touchmove' ? e.touches[0] : e;
        const deltaX = touch.clientX - startX;
        const deltaY = touch.clientY - startY;
        
        const newX = initialX + deltaX;
        const newY = initialY + deltaY;
        
        // Keep within viewport
        const maxX = window.innerWidth - chatbotBtn.offsetWidth;
        const maxY = window.innerHeight - chatbotBtn.offsetHeight;
        
        const boundedX = Math.max(0, Math.min(newX, maxX));
        const boundedY = Math.max(0, Math.min(newY, maxY));
        
        // Use requestAnimationFrame for smooth movement
        requestAnimationFrame(() => {
            // Set button position using left/top
            chatbotBtn.style.left = boundedX + 'px';
            chatbotBtn.style.top = boundedY + 'px';
            chatbotBtn.style.right = 'auto';
            chatbotBtn.style.bottom = 'auto';
            
            // Update window position
            updateWindowPosition();
        });
    }
    
    function endDrag(e) {
        clearTimeout(longPressTimer);
        
        const dragDuration = Date.now() - dragStartTime;
        
        if (isDragging) {
            isDragging = false;
            chatbotBtn.classList.remove('dragging');
            chatbotWindow.classList.remove('dragging');
            saveChatbotPosition();
            
            // Final window position update
            updateWindowPosition();
            
            // Prevent click event after drag
            e.preventDefault();
            e.stopPropagation();
        }
    }
    
    // Hide Chatbot (Temporary - only for current session)
    function hideChatbot(e) {
        e.stopPropagation();
        chatbotBtn.classList.add('hidden');
        
        // Show notification with undo option
        showUndoNotification();
        
        // DON'T save to localStorage - so it shows again on refresh
        // localStorage.setItem('chatbotHidden', 'true'); // REMOVED
    }
    
    // Show Chatbot (Undo hide)
    function showChatbot() {
        chatbotBtn.classList.remove('hidden');
    }
    
    // Show notification with undo button
    function showUndoNotification() {
        const notification = document.createElement('div');
        notification.style.cssText = `
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            z-index: 10001;
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            animation: slideUp 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        `;
        
        notification.innerHTML = `
            <span>Chatbot hidden</span>
            <button onclick="showChatbot(); this.parentElement.remove();" style="
                background: #732C3F;
                color: white;
                border: none;
                padding: 6px 12px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 13px;
                font-weight: 600;
                transition: all 0.2s;
            " onmouseover="this.style.background='#8B4A5C'" onmouseout="this.style.background='#732C3F'">
                Undo
            </button>
        `;
        
        document.body.appendChild(notification);
        
        // Auto remove after 5 seconds
        setTimeout(() => {
            if (notification.parentElement) {
                notification.style.opacity = '0';
                notification.style.transition = 'opacity 0.3s';
                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.remove();
                    }
                }, 300);
            }
        }, 5000);
    }
    
    // Show simple notification
    function showNotification(message) {
        const notification = document.createElement('div');
        notification.style.cssText = `
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            z-index: 10001;
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            animation: slideUp 0.3s ease;
        `;
        notification.textContent = message;
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.style.opacity = '0';
            notification.style.transition = 'opacity 0.3s';
            setTimeout(() => notification.remove(), 300);
        }, 3000);
    }
    
    // Clear any old hidden state on page load (always show chatbot on refresh)
    localStorage.removeItem('chatbotHidden');
    
    // Load saved position on page load
    loadChatbotPosition();
    
    // Toggle Chatbot
    function toggleChatbot() {
        if (isDragging) return; // Don't toggle if dragging
        
        chatbotWindow.classList.toggle('show');
        
        if (chatbotWindow.classList.contains('show')) {
            // Update window position when opening
            updateWindowPosition();
            document.getElementById('chatbotInput').focus();
        }
    }
    
    // Send Message
    function sendChatMessage() {
        const input = document.getElementById('chatbotInput');
        const message = input.value.trim();
        
        if (message) {
            addUserMessage(message);
            input.value = '';
            
            // Show typing indicator
            showTypingIndicator();
            
            // Simulate bot response
            setTimeout(() => {
                hideTypingIndicator();
                addBotResponse(message);
            }, 1500);
        }
    }
    
    // Handle Enter Key
    function handleChatKeyPress(event) {
        if (event.key === 'Enter') {
            sendChatMessage();
        }
    }
    
    // Send Quick Reply
    function sendQuickReply(topic) {
        addUserMessage(topic);
        
        showTypingIndicator();
        
        setTimeout(() => {
            hideTypingIndicator();
            
            const responses = {
                'Features': '‚ú® BizPulse Complete Features:\n\nüì¶ Product Management\n   ‚Ä¢ Inventory tracking\n   ‚Ä¢ Barcode scanning\n   ‚Ä¢ Low stock alerts\n   ‚Ä¢ Category management\n\nüë• Customer Management\n   ‚Ä¢ Customer profiles\n   ‚Ä¢ Purchase history\n   ‚Ä¢ VIP/Regular tags\n\nüí∞ Sales & Billing\n   ‚Ä¢ Quick invoicing\n   ‚Ä¢ Payment tracking\n   ‚Ä¢ Sales reports\n\nüìä Analytics\n   ‚Ä¢ Profit analysis\n   ‚Ä¢ Revenue tracking\n   ‚Ä¢ Visual charts\n\nüì± Mobile App\n   ‚Ä¢ Access anywhere\n   ‚Ä¢ Real-time sync\n\nWant a detailed demo? Call +91 7093635305',
                'Pricing': 'üí∞ BizPulse Pricing Plans:\n\nüÜì Free Trial - 14 days\n   ‚Ä¢ Full feature access\n   ‚Ä¢ No credit card required\n\nüì¶ Basic - ‚Çπ999/month\n   ‚Ä¢ Up to 1000 products\n   ‚Ä¢ Basic reports\n   ‚Ä¢ Email support\n\n‚≠ê Pro - ‚Çπ1,999/month\n   ‚Ä¢ Unlimited products\n   ‚Ä¢ Advanced analytics\n   ‚Ä¢ Priority support\n   ‚Ä¢ Mobile app\n\nüè¢ Enterprise - Custom\n   ‚Ä¢ Custom features\n   ‚Ä¢ Dedicated support\n   ‚Ä¢ API access\n\nAll plans: 24/7 support!\nüìû Call: +91 7093635305',
                'Demo': 'üéØ Great! Let\'s get you started:\n\n1Ô∏è‚É£ Free Trial (14 days)\n   ‚Ä¢ No credit card needed\n   ‚Ä¢ Full access\n   ‚Ä¢ Sample data included\n\n2Ô∏è‚É£ Live Demo\n   ‚Ä¢ Personalized walkthrough\n   ‚Ä¢ Q&A session\n   ‚Ä¢ Setup help\n\nüìû Call us: +91 7093635305\nüìß Email: support@bizpulse.com\nüí¨ WhatsApp: +91 7093635305\n\nOr share your details and we\'ll reach out within 2 hours!',
                'Support': 'üí¨ BizPulse Support:\n\nüìû Phone: +91 7093635305\nüìß Email: support@bizpulse.com\nüí¨ WhatsApp: +91 7093635305\n\n‚è∞ Available: 24/7\n‚ö° Response: < 2 hours\n\nYou can:\n‚Ä¢ Call for immediate help\n‚Ä¢ Email for detailed queries\n‚Ä¢ WhatsApp for quick questions\n\nHow can we help you today?'
            };
            
            addBotMessage(responses[topic] || 'Thanks for your message! How else can I help you?');
        }, 1500);
    }
    
    // Add User Message
    function addUserMessage(text) {
        const messagesDiv = document.getElementById('chatbotMessages');
        const time = new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
        
        const messageHTML = `
            <div class="chat-message user">
                <div class="message-avatar user">üë§</div>
                <div>
                    <div class="message-bubble user">${text}</div>
                    <div class="message-time" style="text-align: right;">${time}</div>
                </div>
            </div>
        `;
        
        messagesDiv.insertAdjacentHTML('beforeend', messageHTML);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }
    
    // Add Bot Message
    function addBotMessage(text) {
        const messagesDiv = document.getElementById('chatbotMessages');
        const time = new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
        
        const messageHTML = `
            <div class="chat-message bot">
                <div class="message-avatar bot">ü§ñ</div>
                <div>
                    <div class="message-bubble bot">${text.replace(/\n/g, '<br>')}</div>
                    <div class="message-time">${time}</div>
                </div>
            </div>
        `;
        
        messagesDiv.insertAdjacentHTML('beforeend', messageHTML);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }
    
    // Advanced AI-like Bot Response Logic
    function addBotResponse(userMessage) {
        const lowerMessage = userMessage.toLowerCase();
        let response = '';
        
        // Greetings - Multiple variations
        if (lowerMessage.match(/\b(hello|hi|hey|hii|hola|namaste|good morning|good afternoon|good evening)\b/)) {
            const greetings = [
                'üëã Hello! Welcome to BizPulse! How can I help you today?',
                'üëã Hi there! Great to see you! What can I do for you?',
                'üëã Hey! Welcome! I\'m here to assist you with anything about BizPulse.',
                'üôè Namaste! How may I help you today?'
            ];
            response = greetings[Math.floor(Math.random() * greetings.length)];
        }
        
        // Pricing & Cost
        else if (lowerMessage.match(/\b(price|pricing|cost|charge|fee|plan|subscription|package)\b/)) {
            response = 'üí∞ BizPulse Pricing Plans:\n\n' +
                       'üÜì Free Trial - 14 days (Full access)\n' +
                       'üì¶ Basic - ‚Çπ999/month\n' +
                       '   ‚Ä¢ Up to 1000 products\n' +
                       '   ‚Ä¢ Basic reports\n' +
                       '   ‚Ä¢ Email support\n\n' +
                       '‚≠ê Pro - ‚Çπ1,999/month\n' +
                       '   ‚Ä¢ Unlimited products\n' +
                       '   ‚Ä¢ Advanced analytics\n' +
                       '   ‚Ä¢ Priority support\n' +
                       '   ‚Ä¢ Mobile app access\n\n' +
                       'üè¢ Enterprise - Custom pricing\n' +
                       '   ‚Ä¢ Custom features\n' +
                       '   ‚Ä¢ Dedicated support\n' +
                       '   ‚Ä¢ API access\n\n' +
                       'All plans include 24/7 support! Want to start your free trial?';
        }
        
        // Features & Capabilities
        else if (lowerMessage.match(/\b(feature|capability|function|what does|what can|how does|module)\b/)) {
            response = '‚ú® BizPulse Features:\n\n' +
                       'üì¶ Product Management\n' +
                       '   ‚Ä¢ Inventory tracking\n' +
                       '   ‚Ä¢ Barcode scanning\n' +
                       '   ‚Ä¢ Low stock alerts\n' +
                       '   ‚Ä¢ Category management\n\n' +
                       'üë• Customer Management\n' +
                       '   ‚Ä¢ Customer profiles\n' +
                       '   ‚Ä¢ Purchase history\n' +
                       '   ‚Ä¢ VIP/Regular/Wholesale tags\n\n' +
                       'üí∞ Sales & Billing\n' +
                       '   ‚Ä¢ Quick invoicing\n' +
                       '   ‚Ä¢ Payment tracking\n' +
                       '   ‚Ä¢ Sales reports\n' +
                       '   ‚Ä¢ Date filters\n\n' +
                       'üìä Analytics & Reports\n' +
                       '   ‚Ä¢ Profit analysis\n' +
                       '   ‚Ä¢ Revenue tracking\n' +
                       '   ‚Ä¢ Top products\n' +
                       '   ‚Ä¢ Visual charts\n\n' +
                       'üì± Mobile App\n' +
                       '   ‚Ä¢ Access anywhere\n' +
                       '   ‚Ä¢ Real-time sync\n' +
                       '   ‚Ä¢ Offline mode\n\n' +
                       'Which feature interests you most?';
        }
        
        // Demo & Trial
        else if (lowerMessage.match(/\b(demo|trial|test|try|show me|example)\b/)) {
            response = 'üéØ Great choice! Here\'s how to get started:\n\n' +
                       '1Ô∏è‚É£ Free Trial (14 days)\n' +
                       '   ‚Ä¢ No credit card required\n' +
                       '   ‚Ä¢ Full feature access\n' +
                       '   ‚Ä¢ Sample data included\n\n' +
                       '2Ô∏è‚É£ Live Demo\n' +
                       '   ‚Ä¢ Personalized walkthrough\n' +
                       '   ‚Ä¢ Q&A session\n' +
                       '   ‚Ä¢ Custom setup help\n\n' +
                       'üìû Call us: +91 7093635305\n' +
                       'üìß Email: support@bizpulse.com\n\n' +
                       'Or share your details and we\'ll reach out within 2 hours!';
        }
        
        // Contact & Support
        else if (lowerMessage.match(/\b(contact|support|help|call|phone|email|reach|talk|speak)\b/)) {
            response = 'üìû Contact BizPulse Support:\n\n' +
                       'üì± Phone: +91 7093635305\n' +
                       'üìß Email: support@bizpulse.com\n' +
                       'üí¨ WhatsApp: +91 7093635305\n\n' +
                       '‚è∞ Available: 24/7\n' +
                       '‚ö° Response time: < 2 hours\n\n' +
                       'You can also:\n' +
                       '‚Ä¢ Call us directly for immediate help\n' +
                       '‚Ä¢ Email for detailed queries\n' +
                       '‚Ä¢ WhatsApp for quick questions\n\n' +
                       'How would you like to connect?';
        }
        
        // Installation & Setup
        else if (lowerMessage.match(/\b(install|setup|download|start|begin|configure)\b/)) {
            response = 'üöÄ Getting Started with BizPulse:\n\n' +
                       '1Ô∏è‚É£ Sign Up\n' +
                       '   ‚Ä¢ Visit our website\n' +
                       '   ‚Ä¢ Create free account\n' +
                       '   ‚Ä¢ Verify email\n\n' +
                       '2Ô∏è‚É£ Setup\n' +
                       '   ‚Ä¢ Add your business details\n' +
                       '   ‚Ä¢ Import products (optional)\n' +
                       '   ‚Ä¢ Customize settings\n\n' +
                       '3Ô∏è‚É£ Start Using\n' +
                       '   ‚Ä¢ Create first invoice\n' +
                       '   ‚Ä¢ Track sales\n' +
                       '   ‚Ä¢ View reports\n\n' +
                       'üì± Mobile App:\n' +
                       '   ‚Ä¢ Android: Play Store\n' +
                       '   ‚Ä¢ iOS: App Store\n\n' +
                       'Need help? Call +91 7093635305';
        }
        
        // Payment & Security
        else if (lowerMessage.match(/\b(payment|pay|secure|security|safe|data|privacy)\b/)) {
            response = 'üîí Security & Payments:\n\n' +
                       '‚úÖ Your data is 100% secure\n' +
                       '   ‚Ä¢ Bank-level encryption\n' +
                       '   ‚Ä¢ Daily backups\n' +
                       '   ‚Ä¢ GDPR compliant\n\n' +
                       'üí≥ Payment Methods:\n' +
                       '   ‚Ä¢ Credit/Debit cards\n' +
                       '   ‚Ä¢ UPI\n' +
                       '   ‚Ä¢ Net banking\n' +
                       '   ‚Ä¢ Wallets\n\n' +
                       'üõ°Ô∏è We never store:\n' +
                       '   ‚Ä¢ Card details\n' +
                       '   ‚Ä¢ CVV numbers\n' +
                       '   ‚Ä¢ Banking passwords\n\n' +
                       'All transactions are processed through secure payment gateways.';
        }
        
        // Integration & API
        else if (lowerMessage.match(/\b(integrate|integration|api|connect|sync|export|import)\b/)) {
            response = 'üîó Integrations & API:\n\n' +
                       '‚úÖ Available Integrations:\n' +
                       '   ‚Ä¢ Accounting software\n' +
                       '   ‚Ä¢ Payment gateways\n' +
                       '   ‚Ä¢ E-commerce platforms\n' +
                       '   ‚Ä¢ Email marketing\n\n' +
                       'üîå API Access:\n' +
                       '   ‚Ä¢ RESTful API\n' +
                       '   ‚Ä¢ Webhook support\n' +
                       '   ‚Ä¢ Real-time sync\n' +
                       '   ‚Ä¢ Developer docs\n\n' +
                       'üìä Data Export:\n' +
                       '   ‚Ä¢ Excel/CSV\n' +
                       '   ‚Ä¢ PDF reports\n' +
                       '   ‚Ä¢ Automated backups\n\n' +
                       'Need custom integration? Contact us at +91 7093635305';
        }
        
        // Mobile App
        else if (lowerMessage.match(/\b(mobile|app|android|ios|phone|smartphone)\b/)) {
            response = 'üì± BizPulse Mobile App:\n\n' +
                       '‚úÖ Available on:\n' +
                       '   ‚Ä¢ Android (Play Store)\n' +
                       '   ‚Ä¢ iOS (App Store)\n' +
                       '   ‚Ä¢ Web (Any browser)\n\n' +
                       'üåü Features:\n' +
                       '   ‚Ä¢ Full ERP access\n' +
                       '   ‚Ä¢ Offline mode\n' +
                       '   ‚Ä¢ Barcode scanning\n' +
                       '   ‚Ä¢ Real-time sync\n' +
                       '   ‚Ä¢ Push notifications\n\n' +
                       'üì≤ Download now and manage your business on the go!\n\n' +
                       'Need help with mobile app? Call +91 7093635305';
        }
        
        // Reports & Analytics
        else if (lowerMessage.match(/\b(report|analytics|analysis|chart|graph|dashboard|insight)\b/)) {
            response = 'üìä Reports & Analytics:\n\n' +
                       'üìà Available Reports:\n' +
                       '   ‚Ä¢ Sales reports (daily/weekly/monthly)\n' +
                       '   ‚Ä¢ Profit analysis\n' +
                       '   ‚Ä¢ Inventory reports\n' +
                       '   ‚Ä¢ Customer insights\n' +
                       '   ‚Ä¢ Tax reports\n\n' +
                       'üìâ Visual Analytics:\n' +
                       '   ‚Ä¢ Interactive charts\n' +
                       '   ‚Ä¢ Trend analysis\n' +
                       '   ‚Ä¢ Comparison graphs\n' +
                       '   ‚Ä¢ Custom dashboards\n\n' +
                       'üìÖ Date Filters:\n' +
                       '   ‚Ä¢ Today/Yesterday\n' +
                       '   ‚Ä¢ This week/month\n' +
                       '   ‚Ä¢ Custom date range\n\n' +
                       'Want to see a demo? Call +91 7093635305';
        }
        
        // Thank you
        else if (lowerMessage.match(/\b(thank|thanks|thx|appreciate|grateful)\b/)) {
            const thanks = [
                'üòä You\'re welcome! Happy to help!',
                'üôè My pleasure! Anything else I can help with?',
                'üòä Glad I could help! Feel free to ask anything else.',
                'üéâ You\'re welcome! We\'re here 24/7 if you need us!'
            ];
            response = thanks[Math.floor(Math.random() * thanks.length)];
        }
        
        // Goodbye
        else if (lowerMessage.match(/\b(bye|goodbye|see you|later|exit|close)\b/)) {
            response = 'üëã Goodbye! Thanks for chatting with BizPulse!\n\n' +
                       'Remember:\n' +
                       'üìû Call us anytime: +91 7093635305\n' +
                       'üìß Email: support@bizpulse.com\n\n' +
                       'Have a great day! üåü';
        }
        
        // Yes/No responses
        else if (lowerMessage.match(/\b(yes|yeah|yep|sure|ok|okay|fine)\b/)) {
            response = 'üëç Great! How can I help you further?\n\n' +
                       'You can ask me about:\n' +
                       '‚Ä¢ Features & pricing\n' +
                       '‚Ä¢ Demo & trial\n' +
                       '‚Ä¢ Support & contact\n' +
                       '‚Ä¢ Mobile app\n' +
                       '‚Ä¢ Reports & analytics\n\n' +
                       'Or call us directly: +91 7093635305';
        }
        
        else if (lowerMessage.match(/\b(no|nope|nah|not really)\b/)) {
            response = 'üòä No problem! Is there something else I can help you with?\n\n' +
                       'Feel free to ask about:\n' +
                       '‚Ä¢ BizPulse features\n' +
                       '‚Ä¢ Pricing plans\n' +
                       '‚Ä¢ Getting started\n' +
                       '‚Ä¢ Technical support\n\n' +
                       'Or reach out: +91 7093635305';
        }
        
        // Out of service questions - Smooth handling
        else if (lowerMessage.match(/\b(weather|news|joke|game|play|movie|song|music)\b/)) {
            response = 'üòä That\'s an interesting question, but I\'m specifically designed to help with BizPulse ERP!\n\n' +
                       'I can help you with:\n' +
                       '‚úÖ Business management\n' +
                       '‚úÖ Inventory tracking\n' +
                       '‚úÖ Sales & billing\n' +
                       '‚úÖ Customer management\n' +
                       '‚úÖ Reports & analytics\n\n' +
                       'Want to know how BizPulse can help your business? üöÄ';
        }
        
        // Personal questions - Smooth handling
        else if (lowerMessage.match(/\b(who are you|your name|what are you|are you human|are you bot|are you real)\b/)) {
            response = 'ü§ñ I\'m BizPulse Assistant, your virtual helper!\n\n' +
                       'I\'m here to:\n' +
                       '‚úÖ Answer questions about BizPulse\n' +
                       '‚úÖ Help you get started\n' +
                       '‚úÖ Provide support information\n' +
                       '‚úÖ Connect you with our team\n\n' +
                       'While I\'m AI-powered, our human team is always ready to help!\n\n' +
                       'üìû Call: +91 7093635305\n' +
                       'üìß Email: support@bizpulse.com';
        }
        
        // Default - Intelligent fallback
        else {
            // Extract key words for context
            const keywords = userMessage.match(/\b\w{4,}\b/g) || [];
            const keywordText = keywords.slice(0, 3).join(', ');
            
            response = 'ü§î I understand you\'re asking about "' + (keywordText || userMessage) + '".\n\n' +
                       'While I may not have a specific answer for that, I can help you with:\n\n' +
                       'üíº Business Management\n' +
                       'üì¶ Inventory & Products\n' +
                       'üí∞ Sales & Billing\n' +
                       'üë• Customer Management\n' +
                       'üìä Reports & Analytics\n\n' +
                       'Or connect with our team for personalized help:\n' +
                       'üìû +91 7093635305\n' +
                       'üìß support@bizpulse.com\n\n' +
                       'What would you like to know about BizPulse?';
        }
        
        addBotMessage(response);
    }
    
    // Typing Indicator
    function showTypingIndicator() {
        const messagesDiv = document.getElementById('chatbotMessages');
        const typingHTML = `
            <div class="chat-message bot" id="typingIndicator">
                <div class="message-avatar bot">ü§ñ</div>
                <div class="typing-indicator">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>
        `;
        messagesDiv.insertAdjacentHTML('beforeend', typingHTML);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }
    
    function hideTypingIndicator() {
        const indicator = document.getElementById('typingIndicator');
        if (indicator) {
            indicator.remove();
        }
    }
</script>
