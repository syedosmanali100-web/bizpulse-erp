<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BizPulse POS - Professional Billing</title>
    <style>
        /* === RESET & BASE === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #fafbfc;
            color: #1a1d29;
            line-height: 1.5;
            overflow: hidden;
        }

        /* === MAIN LAYOUT === */
        .pos-container {
            display: grid;
            grid-template-columns: 420px 1fr 380px;
            height: 100vh;
            gap: 1px;
            background: #e5e7eb;
        }

        /* === LEFT PANEL - MENU & ITEMS === */
        .menu-panel {
            background: white;
            display: flex;
            flex-direction: column;
            border-right: 1px solid #e5e7eb;
        }

        .menu-header {
            padding: 20px 24px 16px;
            border-bottom: 1px solid #f1f3f4;
        }

        .search-container {
            position: relative;
            margin-bottom: 16px;
        }

        .search-input {
            width: 100%;
            padding: 12px 16px 12px 44px;
            border: 1.5px solid #e5e7eb;
            border-radius: 12px;
            font-size: 15px;
            background: #f8f9fa;
            transition: all 0.2s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #4f46e5;
            background: white;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: #6b7280;
            font-size: 18px;
        }

        .category-tabs {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            scrollbar-width: none;
        }

        .category-tabs::-webkit-scrollbar {
            display: none;
        }

        .category-tab {
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s ease;
            border: 1.5px solid transparent;
        }

        .category-tab:hover {
            background: #f3f4f6;
        }

        .category-tab.active {
            background: #4f46e5;
            color: white;
            border-color: #4f46e5;
        }

        .items-grid {
            flex: 1;
            padding: 20px 24px;
            overflow-y: auto;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
            align-content: start;
        }

        .menu-item {
            background: white;
            border: 1.5px solid #f1f3f4;
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .menu-item:hover {
            border-color: #4f46e5;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        }

        .menu-item.out-of-stock {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .menu-item.out-of-stock:hover {
            transform: none;
            border-color: #f1f3f4;
        }

        .item-icon {
            width: 40px;
            height: 40px;
            background: #f8f9fa;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            margin-bottom: 12px;
        }

        .item-name {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 4px;
            line-height: 1.3;
        }

        .item-price {
            font-size: 14px;
            color: #059669;
            font-weight: 600;
        }

        .item-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .item-badge.veg {
            background: #10b981;
        }

        .item-badge.non-veg {
            background: #ef4444;
        }

        /* === CENTER PANEL - CURRENT ORDER === */
        .order-panel {
            background: white;
            display: flex;
            flex-direction: column;
            border-right: 1px solid #e5e7eb;
        }

        .order-header {
            padding: 20px 24px 16px;
            border-bottom: 1px solid #f1f3f4;
            display: flex;
            justify-content: between;
            align-items: center;
        }

        .order-title {
            font-size: 18px;
            font-weight: 700;
            color: #1a1d29;
        }

        .order-actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            padding: 8px 12px;
            border: 1.5px solid #e5e7eb;
            border-radius: 8px;
            background: white;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .action-btn:hover {
            border-color: #4f46e5;
            color: #4f46e5;
        }

        .action-btn.hold {
            color: #f59e0b;
            border-color: #fbbf24;
        }

        .action-btn.clear {
            color: #ef4444;
            border-color: #f87171;
        }

        .order-items {
            flex: 1;
            overflow-y: auto;
            padding: 0 24px;
        }

        .order-item {
            display: flex;
            align-items: center;
            padding: 16px 0;
            border-bottom: 1px solid #f1f3f4;
            animation: slideIn 0.3s ease;
        }

        .order-item:last-child {
            border-bottom: none;
        }

        .order-item.editing {
            background: #fef3c7;
            margin: 0 -16px;
            padding: 16px;
            border-radius: 8px;
        }

        .item-details {
            flex: 1;
            margin-right: 16px;
        }

        .item-order-name {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .item-order-price {
            font-size: 13px;
            color: #6b7280;
        }

        .item-notes {
            font-size: 12px;
            color: #f59e0b;
            margin-top: 4px;
            font-style: italic;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-right: 16px;
        }

        .qty-btn {
            width: 32px;
            height: 32px;
            border: 1.5px solid #e5e7eb;
            border-radius: 8px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .qty-btn:hover {
            border-color: #4f46e5;
            color: #4f46e5;
        }

        .qty-display {
            font-size: 16px;
            font-weight: 600;
            min-width: 24px;
            text-align: center;
        }

        .item-total {
            font-size: 16px;
            font-weight: 700;
            color: #059669;
            min-width: 80px;
            text-align: right;
        }

        .order-summary {
            padding: 20px 24px;
            border-top: 1px solid #f1f3f4;
            background: #f8f9fa;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .summary-row.subtotal {
            font-weight: 600;
            padding-bottom: 8px;
            border-bottom: 1px solid #e5e7eb;
            margin-bottom: 12px;
        }

        .summary-row.total {
            font-size: 18px;
            font-weight: 700;
            color: #1a1d29;
            margin-top: 8px;
            padding-top: 12px;
            border-top: 2px solid #e5e7eb;
        }

        /* === RIGHT PANEL - BILLING SUMMARY === */
        .billing-panel {
            background: white;
            display: flex;
            flex-direction: column;
        }

        .billing-header {
            padding: 20px 24px 16px;
            border-bottom: 1px solid #f1f3f4;
        }

        .billing-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .customer-input {
            width: 100%;
            padding: 12px 16px;
            border: 1.5px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            margin-bottom: 16px;
        }

        .customer-input:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .billing-section {
            padding: 20px 24px;
            border-bottom: 1px solid #f1f3f4;
        }

        .section-title {
            font-size: 14px;
            font-weight: 600;
            color: #6b7280;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .tax-breakdown {
            margin-bottom: 16px;
        }

        .tax-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            font-size: 13px;
            color: #6b7280;
        }

        .discount-section {
            margin-bottom: 16px;
        }

        .discount-input {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }

        .discount-field {
            flex: 1;
            padding: 8px 12px;
            border: 1.5px solid #e5e7eb;
            border-radius: 6px;
            font-size: 13px;
        }

        .apply-discount {
            padding: 8px 16px;
            background: #4f46e5;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
        }

        .grand-total {
            background: #1a1d29;
            color: white;
            padding: 24px;
            text-align: center;
        }

        .total-label {
            font-size: 14px;
            opacity: 0.8;
            margin-bottom: 4px;
        }

        .total-amount {
            font-size: 32px;
            font-weight: 800;
            letter-spacing: -1px;
        }

        .payment-methods {
            padding: 20px 24px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .payment-btn {
            padding: 16px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            font-weight: 600;
        }

        .payment-btn:hover {
            border-color: #4f46e5;
            background: #f8faff;
        }

        .payment-btn.selected {
            border-color: #4f46e5;
            background: #4f46e5;
            color: white;
        }

        .payment-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .payment-label {
            font-size: 13px;
        }

        .checkout-actions {
            padding: 20px 24px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .checkout-btn {
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .checkout-btn.primary {
            background: #059669;
            color: white;
        }

        .checkout-btn.primary:hover {
            background: #047857;
            transform: translateY(-1px);
        }

        .checkout-btn.secondary {
            background: #f3f4f6;
            color: #374151;
            border: 1.5px solid #e5e7eb;
        }

        .checkout-btn.secondary:hover {
            background: #e5e7eb;
        }

        /* === ANIMATIONS === */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        .item-added {
            animation: pulse 0.3s ease;
        }

        /* === RESPONSIVE ADAPTATIONS === */
        @media (max-width: 1400px) {
            .pos-container {
                grid-template-columns: 380px 1fr 340px;
            }
        }

        @media (max-width: 1200px) {
            .pos-container {
                grid-template-columns: 320px 1fr 300px;
            }
            
            .items-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
        }

        /* === ACCESSIBILITY === */
        .menu-item:focus,
        .qty-btn:focus,
        .payment-btn:focus,
        .checkout-btn:focus {
            outline: 2px solid #4f46e5;
            outline-offset: 2px;
        }

        /* === STATUS INDICATORS === */
        .kot-status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .kot-status.pending {
            background: #fef3c7;
            color: #92400e;
        }

        .kot-status.preparing {
            background: #dbeafe;
            color: #1e40af;
        }

        .kot-status.ready {
            background: #d1fae5;
            color: #065f46;
        }

        /* === EMPTY STATES === */
        .empty-order {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #6b7280;
            padding: 40px;
        }

        .empty-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-text {
            font-size: 16px;
            text-align: center;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="pos-container">
        <!-- LEFT PANEL - MENU & ITEMS -->
        <div class="menu-panel">
            <div class="menu-header">
                <div class="search-container">
                    <span class="search-icon">üîç</span>
                    <input type="text" class="search-input" placeholder="Search menu items..." id="menuSearch">
                </div>
                <div class="category-tabs">
                    <div class="category-tab active" data-category="all">All Items</div>
                    <div class="category-tab" data-category="veg">ü•ó Veg</div>
                    <div class="category-tab" data-category="non-veg">üçñ Non-Veg</div>
                    <div class="category-tab" data-category="drinks">ü•§ Drinks</div>
                    <div class="category-tab" data-category="combos">üçΩÔ∏è Combos</div>
                </div>
            </div>
            <div class="items-grid" id="itemsGrid">
                <!-- Menu items will be populated here -->
            </div>
        </div>

        <!-- CENTER PANEL - CURRENT ORDER -->
        <div class="order-panel">
            <div class="order-header">
                <div class="order-title">Current Order</div>
                <div class="order-actions">
                    <button class="action-btn hold">üìã Hold</button>
                    <button class="action-btn clear">üóëÔ∏è Clear</button>
                </div>
            </div>
            <div class="order-items" id="orderItems">
                <div class="empty-order">
                    <div class="empty-icon">üõí</div>
                    <div class="empty-text">
                        Select items from the menu<br>to start building an order
                    </div>
                </div>
            </div>
            <div class="order-summary" id="orderSummary" style="display: none;">
                <div class="summary-row subtotal">
                    <span>Subtotal</span>
                    <span id="subtotalAmount">‚Çπ0.00</span>
                </div>
                <div class="summary-row">
                    <span>Items</span>
                    <span id="itemCount">0</span>
                </div>
            </div>
        </div>

        <!-- RIGHT PANEL - BILLING SUMMARY -->
        <div class="billing-panel">
            <div class="billing-header">
                <div class="billing-title">Billing Summary</div>
                <input type="tel" class="customer-input" placeholder="Customer Phone (Optional)" id="customerPhone">
            </div>

            <div class="billing-section">
                <div class="section-title">Tax Breakdown</div>
                <div class="tax-breakdown">
                    <div class="tax-row">
                        <span>CGST (9%)</span>
                        <span id="cgstAmount">‚Çπ0.00</span>
                    </div>
                    <div class="tax-row">
                        <span>SGST (9%)</span>
                        <span id="sgstAmount">‚Çπ0.00</span>
                    </div>
                </div>

                <div class="section-title">Discount</div>
                <div class="discount-section">
                    <div class="discount-input">
                        <input type="number" class="discount-field" placeholder="Amount" id="discountAmount">
                        <button class="apply-discount">Apply</button>
                    </div>
                </div>
            </div>

            <div class="grand-total">
                <div class="total-label">Grand Total</div>
                <div class="total-amount" id="grandTotal">‚Çπ0.00</div>
            </div>

            <div class="payment-methods">
                <div class="payment-btn selected" data-method="cash">
                    <div class="payment-icon">üíµ</div>
                    <div class="payment-label">Cash</div>
                </div>
                <div class="payment-btn" data-method="upi">
                    <div class="payment-icon">üì±</div>
                    <div class="payment-label">UPI</div>
                </div>
                <div class="payment-btn" data-method="card">
                    <div class="payment-icon">üí≥</div>
                    <div class="payment-label">Card</div>
                </div>
                <div class="payment-btn" data-method="split">
                    <div class="payment-icon">üîÑ</div>
                    <div class="payment-label">Split</div>
                </div>
            </div>

            <div class="checkout-actions">
                <button class="checkout-btn primary" id="processPayment">
                    üí∞ Process Payment
                </button>
                <button class="checkout-btn secondary" id="printKOT">
                    üñ®Ô∏è Print KOT
                </button>
            </div>
        </div>
    </div>

    <script>
        // Sample menu data
        const menuItems = [
            { id: 1, name: "Paneer Butter Masala", price: 280, category: "veg", icon: "üßà", available: true },
            { id: 2, name: "Chicken Biryani", price: 320, category: "non-veg", icon: "üçõ", available: true },
            { id: 3, name: "Dal Tadka", price: 180, category: "veg", icon: "üç≤", available: true },
            { id: 4, name: "Mutton Curry", price: 420, category: "non-veg", icon: "üçñ", available: false },
            { id: 5, name: "Fresh Lime Soda", price: 80, category: "drinks", icon: "üçã", available: true },
            { id: 6, name: "Masala Chai", price: 40, category: "drinks", icon: "‚òï", available: true },
            { id: 7, name: "Veg Thali", price: 250, category: "combos", icon: "üçΩÔ∏è", available: true },
            { id: 8, name: "Chicken Tikka", price: 280, category: "non-veg", icon: "üçó", available: true }
        ];

        let currentOrder = [];
        let selectedPaymentMethod = 'cash';

        // Initialize the POS system
        function initializePOS() {
            renderMenuItems();
            setupEventListeners();
        }

        // Render menu items
        function renderMenuItems(filter = 'all') {
            const itemsGrid = document.getElementById('itemsGrid');
            const filteredItems = filter === 'all' ? menuItems : menuItems.filter(item => item.category === filter);
            
            itemsGrid.innerHTML = filteredItems.map(item => `
                <div class="menu-item ${!item.available ? 'out-of-stock' : ''}" 
                     onclick="addToOrder(${item.id})" 
                     data-id="${item.id}">
                    <div class="item-badge ${item.category === 'veg' ? 'veg' : item.category === 'non-veg' ? 'non-veg' : ''}"></div>
                    <div class="item-icon">${item.icon}</div>
                    <div class="item-name">${item.name}</div>
                    <div class="item-price">‚Çπ${item.price}</div>
                    ${!item.available ? '<div style="color: #ef4444; font-size: 12px; margin-top: 4px;">Out of Stock</div>' : ''}
                </div>
            `).join('');
        }

        // Add item to order
        function addToOrder(itemId) {
            const item = menuItems.find(i => i.id === itemId);
            if (!item || !item.available) return;

            const existingItem = currentOrder.find(orderItem => orderItem.id === itemId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                currentOrder.push({
                    ...item,
                    quantity: 1,
                    notes: ''
                });
            }

            // Add visual feedback
            const menuItemElement = document.querySelector(`[data-id="${itemId}"]`);
            menuItemElement.classList.add('item-added');
            setTimeout(() => menuItemElement.classList.remove('item-added'), 300);

            renderOrder();
            updateBillingSummary();
        }

        // Render current order
        function renderOrder() {
            const orderItemsContainer = document.getElementById('orderItems');
            const orderSummary = document.getElementById('orderSummary');

            if (currentOrder.length === 0) {
                orderItemsContainer.innerHTML = `
                    <div class="empty-order">
                        <div class="empty-icon">üõí</div>
                        <div class="empty-text">
                            Select items from the menu<br>to start building an order
                        </div>
                    </div>
                `;
                orderSummary.style.display = 'none';
                return;
            }

            orderSummary.style.display = 'block';
            
            orderItemsContainer.innerHTML = currentOrder.map(item => `
                <div class="order-item" data-id="${item.id}">
                    <div class="item-details">
                        <div class="item-order-name">${item.name}</div>
                        <div class="item-order-price">‚Çπ${item.price} each</div>
                        ${item.notes ? `<div class="item-notes">${item.notes}</div>` : ''}
                    </div>
                    <div class="quantity-controls">
                        <button class="qty-btn" onclick="updateQuantity(${item.id}, -1)">‚àí</button>
                        <span class="qty-display">${item.quantity}</span>
                        <button class="qty-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
                    </div>
                    <div class="item-total">‚Çπ${(item.price * item.quantity).toFixed(2)}</div>
                </div>
            `).join('');

            // Update summary
            const subtotal = currentOrder.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const itemCount = currentOrder.reduce((sum, item) => sum + item.quantity, 0);
            
            document.getElementById('subtotalAmount').textContent = `‚Çπ${subtotal.toFixed(2)}`;
            document.getElementById('itemCount').textContent = itemCount;
        }

        // Update item quantity
        function updateQuantity(itemId, change) {
            const item = currentOrder.find(orderItem => orderItem.id === itemId);
            if (!item) return;

            item.quantity += change;
            
            if (item.quantity <= 0) {
                currentOrder = currentOrder.filter(orderItem => orderItem.id !== itemId);
            }

            renderOrder();
            updateBillingSummary();
        }

        // Update billing summary
        function updateBillingSummary() {
            const subtotal = currentOrder.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const cgst = subtotal * 0.09;
            const sgst = subtotal * 0.09;
            const total = subtotal + cgst + sgst;

            document.getElementById('cgstAmount').textContent = `‚Çπ${cgst.toFixed(2)}`;
            document.getElementById('sgstAmount').textContent = `‚Çπ${sgst.toFixed(2)}`;
            document.getElementById('grandTotal').textContent = `‚Çπ${total.toFixed(2)}`;
        }

        // Setup event listeners
        function setupEventListeners() {
            // Category tabs
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    renderMenuItems(tab.dataset.category);
                });
            });

            // Payment method selection
            document.querySelectorAll('.payment-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.payment-btn').forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                    selectedPaymentMethod = btn.dataset.method;
                });
            });

            // Search functionality
            document.getElementById('menuSearch').addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                const filteredItems = menuItems.filter(item => 
                    item.name.toLowerCase().includes(searchTerm)
                );
                
                const itemsGrid = document.getElementById('itemsGrid');
                itemsGrid.innerHTML = filteredItems.map(item => `
                    <div class="menu-item ${!item.available ? 'out-of-stock' : ''}" 
                         onclick="addToOrder(${item.id})" 
                         data-id="${item.id}">
                        <div class="item-badge ${item.category === 'veg' ? 'veg' : item.category === 'non-veg' ? 'non-veg' : ''}"></div>
                        <div class="item-icon">${item.icon}</div>
                        <div class="item-name">${item.name}</div>
                        <div class="item-price">‚Çπ${item.price}</div>
                        ${!item.available ? '<div style="color: #ef4444; font-size: 12px; margin-top: 4px;">Out of Stock</div>' : ''}
                    </div>
                `).join('');
            });

            // Clear order
            document.querySelector('.action-btn.clear').addEventListener('click', () => {
                if (confirm('Are you sure you want to clear the current order?')) {
                    currentOrder = [];
                    renderOrder();
                    updateBillingSummary();
                }
            });

            // Process payment
            document.getElementById('processPayment').addEventListener('click', () => {
                if (currentOrder.length === 0) {
                    alert('Please add items to the order first.');
                    return;
                }
                
                const total = document.getElementById('grandTotal').textContent;
                if (confirm(`Process payment of ${total} via ${selectedPaymentMethod.toUpperCase()}?`)) {
                    alert('Payment processed successfully!');
                    currentOrder = [];
                    renderOrder();
                    updateBillingSummary();
                }
            });
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializePOS);
    </script>
</body>
</html>